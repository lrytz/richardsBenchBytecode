/*
 * Decompiled with CFR 0_110.
 * 
 * Could not load the following classes:
 *  scala.Predef
 *  scala.Predef$
 *  scala.StringContext
 *  scala.collection.Seq
 *  scala.collection.mutable.WrappedArray
 *  scala.reflect.ScalaSignature
 *  scala.runtime.BoxesRunTime
 */
import scala.Predef;
import scala.StringContext;
import scala.collection.Seq;
import scala.collection.mutable.WrappedArray;
import scala.reflect.ScalaSignature;
import scala.runtime.BoxesRunTime;

@ScalaSignature(bytes="\u0006\u0001!4A!\u0001\u0002\u0001\u000b\t\u0001B+Y:l\u0007>tGO]8m\u00052|7m\u001b\u0006\u0002\u0007\u00059A(Z7qift4\u0001A\n\u0003\u0001\u0019\u0001\"a\u0002\u0006\u000e\u0003!Q\u0011!C\u0001\u0006g\u000e\fG.Y\u0005\u0003\u0017!\u0011a!\u00118z%\u00164\u0007\u0002C\u0007\u0001\u0005\u000b\u0007I\u0011\u0001\b\u0002\t1Lgn[\u000b\u0002\u001fA\u0011\u0001\u0003A\u0007\u0002\u0005!A!\u0003\u0001B\u0001B\u0003%q\"A\u0003mS:\\\u0007\u0005\u0003\u0005\u0015\u0001\t\u0015\r\u0011\"\u0001\u0016\u0003\tIG-F\u0001\u0017!\t9q#\u0003\u0002\u0019\u0011\t\u0019\u0011J\u001c;\t\u0011i\u0001!\u0011!Q\u0001\nY\t1!\u001b3!\u0011!a\u0002A!b\u0001\n\u0003)\u0012\u0001\u00039sS>\u0014\u0018\u000e^=\t\u0011y\u0001!\u0011!Q\u0001\nY\t\u0011\u0002\u001d:j_JLG/\u001f\u0011\t\u0011\u0001\u0002!\u00111A\u0005\u0002\u0005\nQ!];fk\u0016,\u0012A\t\t\u0003!\rJ!\u0001\n\u0002\u0003\rA\u000b7m[3u\u0011!1\u0003A!a\u0001\n\u00039\u0013!C9vKV,w\fJ3r)\tA3\u0006\u0005\u0002\bS%\u0011!\u0006\u0003\u0002\u0005+:LG\u000fC\u0004-K\u0005\u0005\t\u0019\u0001\u0012\u0002\u0007a$\u0013\u0007\u0003\u0005/\u0001\t\u0005\t\u0015)\u0003#\u0003\u0019\tX/Z;fA!A\u0001\u0007\u0001B\u0001B\u0003%\u0011'\u0001\u0003uCN\\\u0007C\u0001\t3\u0013\t\u0019$A\u0001\u0003UCN\\\u0007\"B\u001b\u0001\t\u00031\u0014A\u0002\u001fj]&$h\b\u0006\u0004\u0010oaJ$h\u000f\u0005\u0006\u001bQ\u0002\ra\u0004\u0005\u0006)Q\u0002\rA\u0006\u0005\u00069Q\u0002\rA\u0006\u0005\u0006AQ\u0002\rA\t\u0005\u0006aQ\u0002\r!\r\u0005\b{\u0001\u0001\r\u0011\"\u0001\u0016\u0003\u0015\u0019H/\u0019;f\u0011\u001dy\u0004\u00011A\u0005\u0002\u0001\u000b\u0011b\u001d;bi\u0016|F%Z9\u0015\u0005!\n\u0005b\u0002\u0017?\u0003\u0003\u0005\rA\u0006\u0005\u0007\u0007\u0002\u0001\u000b\u0015\u0002\f\u0002\rM$\u0018\r^3!\u0011\u0015)\u0005\u0001\"\u0001G\u0003)\u0019X\r\u001e*v]:Lgn\u001a\u000b\u0002Q!)\u0001\n\u0001C\u0001\r\u0006iQ.\u0019:l\u0003Ntu\u000e\u001e%fY\u0012DQA\u0013\u0001\u0005\u0002\u0019\u000b!\"\\1sW\u0006\u001b\b*\u001a7e\u0011\u0015a\u0005\u0001\"\u0001N\u0003EI7\u000fS3mI>\u00138+^:qK:$W\r\u001a\u000b\u0002\u001dB\u0011qaT\u0005\u0003!\"\u0011qAQ8pY\u0016\fg\u000eC\u0003S\u0001\u0011\u0005a)A\bnCJ\\\u0017i]*vgB,g\u000eZ3e\u0011\u0015!\u0006\u0001\"\u0001G\u00039i\u0017M]6BgJ+hN\\1cY\u0016DQA\u0016\u0001\u0005\u0002]\u000b1A];o)\u0005y\u0001\"B-\u0001\t\u0003Q\u0016\u0001E2iK\u000e\\\u0007K]5pe&$\u00180\u00113e)\ry1\f\u0018\u0005\u0006aa\u0003\ra\u0004\u0005\u0006;b\u0003\rAI\u0001\u0007a\u0006\u001c7.\u001a;\t\u000b}\u0003A\u0011\t1\u0002\u0011Q|7\u000b\u001e:j]\u001e$\u0012!\u0019\t\u0003E\u0016t!aB2\n\u0005\u0011D\u0011A\u0002)sK\u0012,g-\u0003\u0002gO\n11\u000b\u001e:j]\u001eT!\u0001\u001a\u0005")
public class TaskControlBlock {
    private final TaskControlBlock link;
    private final int id;
    private final int priority;
    private Packet queue;
    private final Task task;
    private int state;

    public TaskControlBlock link() {
        return this.link;
    }

    public int id() {
        return this.id;
    }

    public int priority() {
        return this.priority;
    }

    public Packet queue() {
        return this.queue;
    }

    public void queue_$eq(Packet x$1) {
        this.queue = x$1;
    }

    public int state() {
        return this.state;
    }

    public void state_$eq(int x$1) {
        this.state = x$1;
    }

    public void setRunning() {
        this.state_$eq(0);
    }

    public void markAsNotHeld() {
        this.state_$eq(this.state() & TaskState$.MODULE$.NOT_HELD());
    }

    public void markAsHeld() {
        this.state_$eq(this.state() | 4);
    }

    public boolean isHeldOrSuspended() {
        return (this.state() & 4) != 0 || this.state() == 2;
    }

    public void markAsSuspended() {
        this.state_$eq(this.state() | 2);
    }

    public void markAsRunnable() {
        this.state_$eq(this.state() | 1);
    }

    public TaskControlBlock run() {
        Packet packet;
        Packet packet2 = this.state() == 3 ? this.queue() : (packet = null);
        if (packet != null) {
            this.queue_$eq(packet.link());
            this.state_$eq(this.queue() == null ? 0 : 1);
        }
        return this.task.run(packet);
    }

    public TaskControlBlock checkPriorityAdd(TaskControlBlock task, Packet packet) {
        TaskControlBlock taskControlBlock;
        if (this.queue() == null) {
            this.queue_$eq(packet);
            this.markAsRunnable();
            taskControlBlock = this.priority() > task.priority() ? this : task;
        } else {
            this.queue_$eq(packet.addTo(this.queue()));
            taskControlBlock = task;
        }
        return taskControlBlock;
    }

    public String toString() {
        return new StringContext((Seq)Predef..MODULE$.wrapRefArray((Object[])new String[]{"tcb { ", "@", " }"})).s((Seq)Predef..MODULE$.genericWrapArray((Object)new Object[]{this.task, BoxesRunTime.boxToInteger((int)this.state())}));
    }

    public TaskControlBlock(TaskControlBlock link, int id, int priority, Packet queue, Task task) {
        this.link = link;
        this.id = id;
        this.priority = priority;
        this.queue = queue;
        this.task = task;
        this.state = this.queue() == null ? 2 : 3;
    }
}
